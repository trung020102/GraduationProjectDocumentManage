<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<th:block th:fragment="collapseCategory (mainCategory)">
    <div class="category-card-item card card-gray col-4 mx-auto collapsed-card p-0"
         th:data-main_category="${mainCategory.id}">
        <div class="card-header d-flex px-3">
            <div class="category-title card-title my-auto mr-auto text-uppercase" th:text="${mainCategory.title}"></div>
            <div class="category-input with-validation w-100 mr-3 d-none">
                <input class="form-control form-control-sm" type="text" th:value="${mainCategory.title}" name="title">
            </div>
            <button class="confirm-edit-category-btn btn btn-sm btn-outline-success border-0 d-none"
                    onclick="updateCategory(this)">
                <i class="fa fa-check"></i>
            </button>
            <button class="cancel-edit-category-btn btn btn-sm btn-outline-info border-0 d-none"
                    onclick="handleCancelEditCategoryButton(this)" th:data-main_category_title="${mainCategory.title}">
                <i class="fa fa-times"></i>
            </button>
            <button class="edit-category-btn btn btn-sm btn-outline-warning border-0"
                    onclick="handleEditCategoryButton(this)">
                <i class="fa fa-edit"></i>
            </button>
            <button class="delete-category-btn btn btn-sm btn-outline-danger border-0"
                    onclick="deleteMainCategory(this)">
                <i class="fa fa-trash-alt"></i>
            </button>
            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
        </div>
        <div class="card-body p-0" style="display: none">
            <ul class="sub-category-item nav nav-pills flex-column">
                <!-- Render sub-category list -->
                <th:block th:each="subCategory: ${mainCategory.subCategories}">
                    <li class="nav-item active d-flex with-validation" th:data-sub_category_id="${subCategory.id}">
                        <div class="sub-category-title nav-link" th:text="${subCategory.title}"></div>
                        <input class="sub-category-input col form-control form-control-sm mx-3 my-2 d-none"
                               type="text" th:value="${subCategory.title}" name="title">
                        <div class="ml-auto mr-2 my-auto">
                            <i class="confirm-sub-category-btn fa fa-check-circle btn btn-sm text-success my-auto d-none"
                                onclick="updateSubCategory(this)"></i>
                            <i class="cancel-edit-sub-category-btn fa fa-times-circle btn btn-sm text-info my-auto d-none"
                                onclick="handleCancelEditSubCategoryButton(this)" th:data-sub_category_title="${subCategory.title}"></i>
                            <i class="edit-sub-category-btn edit fa fa-edit btn btn-sm text-gray my-auto"
                                onclick="handleEditSubCategoryButton(this)"></i>
                            <i class="delete-sub-category-btn fa fa-trash-alt btn btn-sm text-danger my-auto"
                               onclick="deleteSubCategory(this)"></i>
                        </div>
                    </li>
                </th:block>
                <li class="nav-item active">
                    <div class="input-group input-group-sm px-3 py-2 with-validation">
                        <input type="text" class="sub-category-creation-input form-control"
                               th:placeholder="#{title.category.enterChildName}" name="title">
                        <div class="input-group-append">
                            <button type="button" class="create-sub-category-btn btn btn-info"
                                    th:text="#{button.create}" onclick="createSubCategory(this)">
                            </button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</th:block>